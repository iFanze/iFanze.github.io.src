---
title: 《代码大全》读书笔记 8
categories: 笔记
toc: true
comments: true
date: 2018-06-28 19:50:16
tags:
    - C++
    - coding
    - 读书
---

《代码大全》读书笔记 第八章 防御式编程


<!-- more -->
<!-- toc -->

8 防御式编程
==============

- 子程序应该不因传入错误数据而被破坏，哪怕是由其他子程序产生的错误数据。

8.1 保护程序免遭非法输入数据的破坏
---------------------------------

- 检查所有来源于外部的数据的值。
- 检查子程序所有输入参数的值。
- 决定如何处理错误的输入数据。


8.2 断言（Assertions）
----------------------

- 用错误处理代码来处理预期会发生的状况，用断言来处理绝不应该发生的状况。
- 把断言当作可执行的注释。
- 避免把需要执行的代码放到断言中。
- 用断言来注解并验证前条件和后条件。
- 对于高健壮性的代码，应该先使用断言再处理错误。（仅对大型系统而言，一般程序应该使用一种一致的处理方法。）


8.3 错误处理技术（Error-Handling Techniques）
--------------------------------------------

- 返回中立值。
- 换用下一个正确的数据。
- 返回与前次相同的数据。
- 换用最接近的合法值。
- 记录日志。
- 返回一个错误码。
- 调用统一的错误处理子程序或对象。（整个程序会与之高耦合）
- 当错误发生时显示出错信息。
- 用最妥当的方式在局部出错错误。
- 关闭程序。

- 正确性（correctness）：意味着永不返回不准确的结果，哪怕不返回数据。
- 健壮性（robustness）：意味着不断尝试采取某些措施，以保证软件可以持续地运转下去，哪怕有时做出一些不够准确地结果。

- 确定一种通用的处理错误参数的方法，是架构层次（或称高层次）的设计决策。