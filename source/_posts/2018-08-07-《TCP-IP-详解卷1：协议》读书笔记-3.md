---
title: 《TCP/IP详解 卷1:协议》读书笔记 3
categories: 笔记
toc: true
comments: true
date: 2018-08-07 17:42:43
tags:
---

One Sentence.

<!-- more -->
<!-- toc -->


第三章 链路层
================

3.1 引言
---------

- 设计链路层的目的是为 IP 模块发送和接收 IP 数据报，可用于携带一些支持 IP 的辅助性协议，如 ARP。
- TCP/IP 支持多种链路层，依赖于网络硬件类型：

    - 有线局域网，如以太网。
    - 城域网（MAN），如服务供应商提供的有线电视和 DSL 连接。
    - 有线语音网络，如支持调制解调器的电话线。
    - 无线网络，如 Wi-Fi（无线局域网）。
    - 基于蜂窝技术的各种无线数据服务，如 HSPA、EV-DO、LTE、WiMAX。

- 本章将讨论点到点协议（PPP）、如何在其他协议中携带链路层协议、隧道技术。

- 链路层的 PDU 通常称为：帧。
- 帧通常支持可变的帧长度，范围从几字节到几千字节。该上限称为最大传输单元（MTU）。


3.2 以太网和 IEEE 802 局域网/城域网标准
------------------------------------

### 3.2.1 IEEE 802 局域网/城域网标准

- 介质访问控制（MAC）协议：

    - 基于每个站尝试独立使用网络。如CSMA/CD：带冲突（或碰撞）检测的载波侦听多路访问。使得在给定时间内，基于竞争的，网络中只有一个帧传输。
    - 基于预先安排的协调。如依据为每个站分配的时段发送。

- 共享电缆 -> 双绞线（10BASE-T） -> 快速以太网（100BASE-TX，100Mb/s） -> 以太网交换机。

- 以太网标准：802.3。
- Wi-Fi 标准：802.11（帧格式和通用接口大部分来自 802.3）。

### 3.2.2 以太网帧格式

![](http://static.ifanze.cn/Annotation.png)

- 前导字段和帧起始分隔符（SFD）：用于接收器同步。
    
    - 前导典型值：0xAA。
    - SFD典型值：0xAB。

- 目的地址（DST）和源地址（SRC）：各 6 字节，又称 MAC地址、链路层地址、802地址、硬件地址、物理地址。允许广播（ARP协议）或组播（ICMPv6协议）

- 类型或长度字段：大于等于1536表示类型，小于等于1500表示长度。常见值：

    - IPv4：0x0800。
    - IPv6：0x86DD。
    - ARP：0x0806。
    - Q标签帧：0x8100。

- 标签：常见的是由 802.1p 和 802.1q 使用的，提供虚拟局域网（VLAN）和一些服务质量（QoS）指示符。

    - 信封帧：802.3 帧格式提供最大为 482 字节的标签，这些较大的帧称为信封帧。
    - Q标签帧也是信封帧。

- 数据区（有效载荷）：放置上层 PDU，最大为 1500 字节（MTU），有时会填充 0 来满足最小长度要求。

- 循环冗余校验（CRC）字段或帧校验序列（FCS）字段中：32位。